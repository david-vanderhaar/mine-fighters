import{r as e}from"./phaser-DJe_tbjO.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var t=e();class a extends t.Scene{constructor(){super("Boot")}preload(){this.load.image("background","assets/title_bg.png")}create(){this.scene.start("Preloader")}}function r(e,{name:t="BaseCharacter",health:a=10,speed:r=10,attack:i=1,spritesheetName:s="default",x:n=600,y:o=370,flipRight:c=!1}){const l=function(e,t,a,r){const i=e.add.sprite(t,a);return i.setScale(8),i.setFlipX(r),i}(e,n,o,c);return{name:t,health:a,speed:r,attack:i,sprite:l,initializeAnimations:()=>function(e,t){e.anims.create({key:t+"-punch",frames:e.anims.generateFrameNumbers(t,{frames:[0,1,2,3]}),frameRate:8}),e.anims.create({key:t+"-walk",frames:e.anims.generateFrameNumbers(t,{frames:[4,5,6,7]}),frameRate:8}),e.anims.create({key:t+"-idle",frames:e.anims.generateFrameNumbers(t,{frames:[8,9,10,11]}),frameRate:8,repeat:-1}),e.anims.create({key:t+"-kick",frames:e.anims.generateFrameNumbers(t,{frames:[12,13,14,15,12]}),frameRate:8}),e.anims.create({key:t+"-jump",frames:e.anims.generateFrameNumbers(t,{frames:[16,17,18,19]}),frameRate:8}),e.anims.create({key:t+"-jumpkick",frames:e.anims.generateFrameNumbers(t,{frames:[16,17,18,19,20,19,18]}),frameRate:8}),e.anims.create({key:t+"-win",frames:e.anims.generateFrameNumbers(t,{frames:[24,25]}),frameRate:8,repeat:-1,repeatDelay:1e3}),e.anims.create({key:t+"-die",frames:e.anims.generateFrameNumbers(t,{frames:[28,29,30]}),frameRate:8})}(e,s),startAnimationPreview:()=>function(e,t,a){const r=["walk","idle","kick","punch","jump","jumpkick","win","die"];t.play(a+"-idle");let i=Math.floor(Math.random()*r.length);e.input.on("pointerdown",function(){i++,i===r.length&&(i=0);const e=`${a}-${r[i]}`;t.play(e)})}(e,l,s),initializePhysics:()=>{e.physics.add.existing(l),l.body.setCollideWorldBounds(!0),l.body.setGravity(0,1e3),l.body.setMaxVelocity(600,600)},play:e=>function(e,t,a){const r=`${t}-${a}`;e.anims.currentAnim.key===r&&e.anims.isPlaying||(e.play(r),["punch","kick","jumpkick","walk"].includes(a)&&e.on("animationcomplete",()=>{e.play(t+"-idle")},{once:!0}))}(l,s,e)}}class i extends t.Scene{constructor(){super("CharacterPreview"),this.characters=[]}create(){const e=r(this,{name:"Steve",spritesheetName:"steve",x:800,y:370});e.initializeAnimations(),e.startAnimationPreview(),e.initializePhysics(),this.characters.push(e);const t=r(this,{name:"drowned",spritesheetName:"drowned",x:400,y:370,flipRight:!0});t.initializeAnimations(),t.startAnimationPreview(),t.initializePhysics(),this.characters.push(t),console.log(this.input),this.input.gamepad.once("connected",function(e){console.log("Gamepad connected:",e.id)},this)}update(){!function(e,t){const a=e.input.gamepad.gamepads;t.forEach((e,t)=>{!function(e,t,a){if(!a)return;const r=t.sprite;a.left?(r.x-=4,r.flipX=!1,t.play("walk")):a.right?(r.x+=4,r.flipX=!0,t.play("walk")):a.up?r.body.onFloor()&&(r.body.setVelocityY(-600),t.play("jump")):a.down||(a.A?t.play("punch"):a.B?t.play("kick"):a.X?r.body.onFloor()&&t.play("win"):a.Y?t.play("die"):r.body.onFloor())}(0,e,a[t])})}(this,this.characters)}}class s extends t.Scene{constructor(){super("Game")}create(){this.cameras.main.setBackgroundColor(65280),this.add.image(512,384,"background").setAlpha(.5),this.add.text(512,384,"Make something fun!\nand share it with us:\nsupport@phaser.io",{fontFamily:"Arial Black",fontSize:38,color:"#ffffff",stroke:"#000000",strokeThickness:8,align:"center"}).setOrigin(.5),this.input.once("pointerdown",()=>{this.scene.start("GameOver")})}}class n extends t.Scene{constructor(){super("GameOver")}create(){this.cameras.main.setBackgroundColor(16711680),this.add.image(512,384,"background").setAlpha(.5),this.add.text(512,384,"Game Over",{fontFamily:"Arial Black",fontSize:64,color:"#ffffff",stroke:"#000000",strokeThickness:8,align:"center"}).setOrigin(.5),this.input.once("pointerdown",()=>{this.scene.start("MainMenu")})}}class o extends t.Scene{constructor(){super("MainMenu")}create(){this.add.image(512,384,"background"),this.add.image(512,300,"logo"),this.add.text(512,560,"Press to Start",{fontFamily:"Arial Black",fontSize:38,color:"#ffffff",stroke:"#000000",strokeThickness:8,align:"center"}).setOrigin(.5),this.input.once("pointerdown",()=>{this.scene.start("CharacterPreview")})}}class c extends t.Scene{constructor(){super("Preloader")}init(){this.add.image(512,384,"background"),this.add.rectangle(512,384,468,32).setStrokeStyle(1,16777215);const e=this.add.rectangle(282,384,4,28,16777215);this.load.on("progress",t=>{e.width=4+460*t})}preload(){this.load.setPath("assets"),this.load.image("logo","logo.png"),this.load.spritesheet("steve","characters/steve.png",{frameWidth:48,frameHeight:48}),this.load.spritesheet("zombie","characters/zombie.png",{frameWidth:48,frameHeight:48}),this.load.spritesheet("piglin","characters/piglin.png",{frameWidth:48,frameHeight:48}),this.load.spritesheet("drowned","characters/drowned.png",{frameWidth:48,frameHeight:48})}create(){this.scene.start("MainMenu")}}const l={type:t.AUTO,width:1024,height:768,parent:"game-container",backgroundColor:"#141516",pixelArt:!0,scale:{mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH},physics:{default:"arcade",arcade:{}},input:{gamepad:!0},scene:[a,c,o,i,s,n]};document.addEventListener("DOMContentLoaded",()=>{new t.Game({...l,parent:"game-container"})});
